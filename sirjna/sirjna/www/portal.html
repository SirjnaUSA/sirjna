<!DOCTYPE html><html><head><title>Portal</title><link rel='stylesheet' href='/assets/sirjna/css/sirjna.css'></head><body class='grid-paper'><div class='container' style='padding:32px 0;'><h2>Student Portal</h2><div id='progress' class='muted'></div><div id='steps'></div></div><script>(async function(){try{const me=await (await fetch('/api/method/frappe.auth.get_logged_user')).json();if(!me.message){location='/login';return;}const sp=await (await fetch('/api/resource/Student Profile?fields=["name","full_name","progress_pct","status_phase"]&filters=[["user","=","'+(me.message||"")+'"]]')).json();const row=(sp.data||[])[0];if(!row){document.getElementById('progress').innerText='No profile yet.';return;}document.getElementById('progress').innerText=`Phase: ${row.status_phase} Â· Progress: ${row.progress_pct||0}%`;const steps=await (await fetch('/api/resource/Mentorship Step?fields=["name","title","phase","order_index"]&limit_page_length=100')).json();const items=(steps.data||[]).filter(s=>s.phase===row.status_phase).sort((a,b)=>(a.order_index||0)-(b.order_index||0));document.getElementById('steps').innerHTML=items.map(s=>`<div class='card' style='margin:8px 0'><strong>${s.title}</strong></div>`).join('')||'<p>No steps yet.</p>'; }catch(e){document.getElementById('progress').innerText='Error loading portal.';}})();</script></body></html>
